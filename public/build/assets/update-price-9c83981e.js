import{r as k}from"./validators-be8c4c00.js";import{r as o,c as C,b as s,a as e,w as r,s as E,p as j,o as S,u as P,V,d,l as b,t as T,y as B}from"./main-ec419c44.js";import{_ as F}from"./AppTextField-f30e7b8a.js";import{$ as N}from"./api-59acfd0c.js";import{_ as R}from"./_plugin-vue_export-helper-c27b6911.js";import{V as h}from"./VForm-94a51087.js";import{V as q}from"./VSnackbar-2a30aeb7.js";import{V as x,a as u}from"./VRow-e2699735.js";import{V as I}from"./VCard-58625648.js";import{V as M}from"./VCardText-f457a064.js";import"./VTextField-2007f8dc.js";import"./VImg-bbab9d3d.js";import"./VOverlay-0a1a33f7.js";import"./index-593e39a4.js";import"./useAbility-f48145f4.js";import"./VAvatar-48f09add.js";const U={class:"d-flex flex-wrap justify-start justify-sm-space-between gap-y-4 gap-x-6 mb-6"},$={class:"d-flex flex-column justify-center"},D={class:"d-flex gap-4 align-center flex-wrap"},A={__name:"update-price",setup(z){const g=j(),c=o({price:5e3}),y=()=>({price:""}),p=o(y()),f=o(),w=()=>{var l;(l=f.value)==null||l.validate().then(async({valid:t})=>{if(t){const i=await N("/credit-card/update-price",{method:"PUT",body:{price:c.value.price}});if(p.value=y(),i.status==200)_.value="success",n.value=!0,g.push("/credit-card");else{_.value="error",n.value=!0,m.value="";for(const a in i.errors)i.errors[a].forEach(v=>{console.log(a+": "+v),p.value[a]+=v+`
`,m.value+=a+": "+v+", "})}B(()=>{var a;(a=f.value)==null||a.resetValidation()})}})},n=o(!1),m=o(""),_=o("success");return(l,t)=>{const i=F;return S(),C("div",null,[t[5]||(t[5]=s("div",{class:"d-flex flex-wrap justify-start justify-sm-space-between gap-y-4 gap-x-6 mb-6"},[s("div",{class:"d-flex flex-column justify-center"},[s("h4",{class:"text-h4 font-weight-medium"},"Modifier les prix de vente de toutes les cartes"),s("span",null,"Nouveau prix")])],-1)),e(h,{ref_key:"refForm",ref:f,onSubmit:E(w,["prevent"])},{default:r(()=>[e(x,null,{default:r(()=>[e(u,{md:"12"},{default:r(()=>[e(I,{class:"mb-6",title:"Information des cartes"},{default:r(()=>[e(M,null,{default:r(()=>[e(x,null,{default:r(()=>[e(u,{cols:"12"},{default:r(()=>[e(x,null,{default:r(()=>[e(u,{cols:"12",md:"12",lg:"12"},{default:r(()=>[e(i,{modelValue:c.value.price,"onUpdate:modelValue":t[0]||(t[0]=a=>c.value.price=a),"error-messages":p.value.price,label:"Prix de vente",type:"number",placeholder:"Ex: 5000",rules:["requiredValidator"in l?l.requiredValidator:P(k)]},null,8,["modelValue","error-messages","rules"])]),_:1})]),_:1})]),_:1})]),_:1})]),_:1})]),_:1})]),_:1}),e(u,{cols:"12"},{default:r(()=>[s("div",U,[s("div",$,[e(u,{cols:"11"},{default:r(()=>[e(V,{"prepend-icon":"tabler-arrow-narrow-left",to:"/credit-card"},{default:r(()=>t[2]||(t[2]=[d(" Coficartes ")])),_:1})]),_:1})]),s("div",D,[e(V,{type:"reset",variant:"tonal",color:"primary"},{default:r(()=>[e(b,{start:"",icon:"tabler-circle-minus"}),t[3]||(t[3]=d(" Effacer "))]),_:1}),e(V,{type:"submit",class:"me-3"},{default:r(()=>[t[4]||(t[4]=d(" Enregistrer ")),e(b,{end:"",icon:"tabler-checkbox"})]),_:1})])])]),_:1})]),_:1})]),_:1},512),e(q,{modelValue:n.value,"onUpdate:modelValue":t[1]||(t[1]=a=>n.value=a),transition:"scale-transition",location:"top end",color:_.value},{default:r(()=>[d(T(m.value),1)]),_:1},8,["modelValue","color"])])}}},oe=R(A,[["__scopeId","data-v-3e0f6236"]]);export{oe as default};
