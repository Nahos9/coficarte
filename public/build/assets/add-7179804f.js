import{r as m}from"./validators-be8c4c00.js";import{r as p,c as E,b as n,a as e,w as l,s as S,p as C,v as j,o as F,u as c,x as U,V as g,d as _,l as D,t as T,y as R}from"./main-ec419c44.js";import{_ as B}from"./AppDateTimePicker-eb464a47.js";import{_ as I}from"./AppTextField-f30e7b8a.js";import{$ as N}from"./api-59acfd0c.js";import{_ as P}from"./_plugin-vue_export-helper-c27b6911.js";import{V as Q}from"./VForm-94a51087.js";import{V as $}from"./VSnackbar-2a30aeb7.js";import{V as x,a as s}from"./VRow-e2699735.js";import{V as A}from"./VCard-58625648.js";import{V as M}from"./VCardText-f457a064.js";import"./VTextField-2007f8dc.js";import"./VImg-bbab9d3d.js";import"./VOverlay-0a1a33f7.js";import"./index-593e39a4.js";import"./useAbility-f48145f4.js";import"./VAvatar-48f09add.js";const h={class:"d-flex align-center justify-center pa-2"},G={class:"d-flex align-center justify-center pa-2"},O={class:"d-flex flex-wrap justify-start justify-sm-space-between gap-y-4 gap-x-6 mb-6"},z={class:"d-flex flex-column justify-center"},H={class:"d-flex gap-4 align-center flex-wrap"},J={__name:"add",setup(K){const k=C(),a=p({quantity:1,card_number:"0012489635",delivery_date:"2024-05-05",expiration_date:"2030-05-05",invoice_reference:"QSDFSDFSDFSDFQSDFSQ",price:11900,buy:5e3}),q=()=>({quantity:"",card_number:"",delivery_date:"",expiration_date:"",invoice_reference:"",price:"",buy:""}),d=p(q()),V=p(),w=()=>{var t;(t=V.value)==null||t.validate().then(async({valid:r})=>{if(r){const u=await N("/credit-card",{method:"POST",body:{quantity:a.value.quantity,card_number:a.value.card_number.replace(/\s+/g,""),delivery_date:a.value.delivery_date,expiration_date:a.value.expiration_date,invoice_reference:a.value.invoice_reference,price:a.value.price,buy:a.value.buy}});if(d.value=q(),u.status==201)b.value="success",v.value=!0,k.push("/credit-card");else{b.value="error",v.value=!0,y.value="";for(const i in u.errors)u.errors[i].forEach(f=>{console.log(i+": "+f),d.value[i]+=f+`
`,y.value+=i+": "+f+", "})}R(()=>{var i;(i=V.value)==null||i.resetValidation()})}})},v=p(!1),y=p(""),b=p("success");return(t,r)=>{const u=I,i=B,f=j("mask");return F(),E("div",null,[r[11]||(r[11]=n("div",{class:"d-flex flex-wrap justify-start justify-sm-space-between gap-y-4 gap-x-6 mb-6"},[n("div",{class:"d-flex flex-column justify-center"},[n("h4",{class:"text-h4 font-weight-medium"},"Ajouter des cartes"),n("span",null,"Informations sur la première cartes du lot")])],-1)),e(Q,{ref_key:"refForm",ref:V,onSubmit:S(w,["prevent"])},{default:l(()=>[e(x,null,{default:l(()=>[e(s,{md:"12"},{default:l(()=>[e(A,{class:"mb-6",title:"Information des cartes"},{default:l(()=>[e(M,null,{default:l(()=>[e(x,null,{default:l(()=>[e(s,{cols:"12"},{default:l(()=>[e(x,null,{default:l(()=>[e(s,{cols:"12",md:"12",lg:"12"},{default:l(()=>[e(u,{modelValue:a.value.quantity,"onUpdate:modelValue":r[0]||(r[0]=o=>a.value.quantity=o),"error-messages":d.value.quantity,label:"Quantité",type:"number",placeholder:"Ex: 10",rules:["requiredValidator"in t?t.requiredValidator:c(m)]},null,8,["modelValue","error-messages","rules"])]),_:1}),e(s,{cols:"12",md:"12",lg:"12"},{default:l(()=>[U(e(u,{modelValue:a.value.card_number,"onUpdate:modelValue":r[1]||(r[1]=o=>a.value.card_number=o),"error-messages":d.value.card_number,label:"Numéro de la première carte",placeholder:"Ex: 00 12 52 25 95",rules:["requiredValidator"in t?t.requiredValidator:c(m)]},null,8,["modelValue","error-messages","rules"]),[[f,"## ## ## ## ##"]])]),_:1}),e(s,{cols:"12",md:"12",lg:"12"},{default:l(()=>[e(u,{modelValue:a.value.invoice_reference,"onUpdate:modelValue":r[2]||(r[2]=o=>a.value.invoice_reference=o),"error-messages":d.value.invoice_reference,label:"Référence de la facture",placeholder:"Ex: DD5DDG425",rules:["requiredValidator"in t?t.requiredValidator:c(m)]},null,8,["modelValue","error-messages","rules"])]),_:1}),e(s,{cols:"12",md:"12",lg:"12"},{default:l(()=>[e(u,{modelValue:a.value.price,"onUpdate:modelValue":r[3]||(r[3]=o=>a.value.price=o),"error-messages":d.value.price,label:"Prix de vente",type:"number",placeholder:"Ex: 5000",rules:["requiredValidator"in t?t.requiredValidator:c(m)]},null,8,["modelValue","error-messages","rules"])]),_:1}),e(s,{cols:"12",md:"12",lg:"12"},{default:l(()=>[e(u,{modelValue:a.value.buy,"onUpdate:modelValue":r[4]||(r[4]=o=>a.value.buy=o),"error-messages":d.value.buy,label:"Prix d'achat",type:"number",placeholder:"Ex: 5000",rules:["requiredValidator"in t?t.requiredValidator:c(m)]},null,8,["modelValue","error-messages","rules"])]),_:1})]),_:1})]),_:1}),e(s,{cols:"6"},{default:l(()=>[n("div",h,[e(i,{modelValue:a.value.delivery_date,"onUpdate:modelValue":r[5]||(r[5]=o=>a.value.delivery_date=o),"error-messages":d.value.delivery_date,label:"Date de livraison",placeholder:"Ex: 2022-01-01",rules:["requiredValidator"in t?t.requiredValidator:c(m)],config:{inline:!0},class:"calendar-date-picker"},null,8,["modelValue","error-messages","rules"])])]),_:1}),e(s,{cols:"6"},{default:l(()=>[n("div",G,[e(i,{modelValue:a.value.expiration_date,"onUpdate:modelValue":r[6]||(r[6]=o=>a.value.expiration_date=o),"error-messages":d.value.expiration_date,label:"Date d'expiration",placeholder:"Ex: 2022-01-01",rules:["requiredValidator"in t?t.requiredValidator:c(m)],config:{inline:!0},class:"calendar-date-picker"},null,8,["modelValue","error-messages","rules"])])]),_:1})]),_:1})]),_:1})]),_:1})]),_:1}),e(s,{cols:"12"},{default:l(()=>[n("div",O,[n("div",z,[e(s,{cols:"11"},{default:l(()=>[e(g,{"prepend-icon":"tabler-arrow-narrow-left",to:"/credit-card"},{default:l(()=>r[8]||(r[8]=[_(" Coficartes ")])),_:1})]),_:1})]),n("div",H,[e(g,{type:"reset",variant:"tonal",color:"primary"},{default:l(()=>[e(D,{start:"",icon:"tabler-circle-minus"}),r[9]||(r[9]=_(" Effacer "))]),_:1}),e(g,{type:"submit",class:"me-3"},{default:l(()=>[r[10]||(r[10]=_(" Enregistrer ")),e(D,{end:"",icon:"tabler-checkbox"})]),_:1})])])]),_:1})]),_:1})]),_:1},512),e($,{modelValue:v.value,"onUpdate:modelValue":r[7]||(r[7]=o=>v.value=o),transition:"scale-transition",location:"top end",color:b.value},{default:l(()=>[_(T(y.value),1)]),_:1},8,["modelValue","color"])])}}},ce=P(J,[["__scopeId","data-v-915515da"]]);export{ce as default};
