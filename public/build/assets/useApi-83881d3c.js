import{bA as u,e as s,b0 as n}from"./main-6c5357b5.js";const c=u({baseUrl:"/api",fetchOptions:{headers:{Accept:"application/json"}},options:{refetch:!0,async beforeFetch({options:e}){const t=s("userToken").value;return t&&(e.headers={...e.headers,Authorization:`Bearer ${t}`,Accept:"application/json"}),{options:e}},async afterFetch(e){const{data:t,response:a}=e;let r=null;try{r=n(t),r.status===403&&(r.errors.sub_code[0]=="001"?(s("userToken").value=null,s("userData").value=null,s("userAbilityRules").value=null,window.location.href="/not-authorized"):r.errors.sub_code[0]=="002"&&window.location.href!="/settings/user/security"&&(window.location.href="/settings/user/security"))}catch(o){console.error(o)}return{data:r,response:a}},async onFetchError(e){const{data:t,response:a}=e;let r=null;try{r=n(t)}catch(o){console.error(o)}a.status==401&&(s("userToken").value=null,s("userData").value=null,s("userAbilityRules").value=null,window.location.href="/login")}}});export{c as u};
